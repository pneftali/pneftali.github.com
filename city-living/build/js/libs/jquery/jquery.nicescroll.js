/* jquery.nicescroll
-- version 3.0.0 RC8
-- copyright 2011-12 InuYaksa*2012
-- licensed under the MIT
--
-- http://areaaperta.com/nicescroll
-- https://github.com/inuyaksa/jquery.nicescroll
--
*/

(function(e){function u(){var e=document.getElementsByTagName("script"),t=e[e.length-1].src.split("?")[0];return t.split("/").length>0?t.split("/").slice(0,-1).join("/")+"/":""}function b(e,t,n){for(var r=0;r<t.length;r++)n(e,t[r])}var t=!1,n=!1,r=!1,i=5e3,s=2e3,o=e,f=u(),l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||!1}(),c=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||!1}(),h=!1,p=function(){function o(){var n=["-moz-grab","-webkit-grab","grab"];if(t.ischrome||t.isie)n=[];for(var r=0;r<n.length;r++){var i=n[r];e.style.cursor=i;if(e.style["cursor"]==i)return i}return"url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}if(h)return h;var e=document.createElement("DIV"),t={};t.isopera="opera"in window,t.isie="all"in document&&"attachEvent"in e&&!t.isopera,t.isieold=t.isie&&!("msInterpolationMode"in e.style),t.isie7=t.isie&&!t.isieold&&(!("documentMode"in document)||document.documentMode==7),t.isie8=t.isie&&"documentMode"in document&&document.documentMode==8,t.isie9=t.isie&&"performance"in window&&document.documentMode>=9,t.isie10=t.isie&&"performance"in window&&document.documentMode>=10,t.isie9mobile=/iemobile.9/i.test(navigator.userAgent),t.isie9mobile&&(t.isie9=!1),t.isie7mobile=!t.isie9mobile&&t.isie7&&/iemobile/i.test(navigator.userAgent),t.ismozilla="MozAppearance"in e.style,t.ischrome="chrome"in window,t.cantouch="ontouchstart"in document.documentElement,t.hasmstouch=window.navigator.msPointerEnabled||!1,t.ismac=/^mac$/i.test(navigator.platform),t.isios=t.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),t.isios4=t.isios&&!("seal"in Object),t.trstyle=!1,t.hastransform=!1,t.hastranslate3d=!1,t.transitionstyle=!1,t.hastransition=!1,t.transitionend=!1;var n=["transform","msTransform","webkitTransform","MozTransform","OTransform"];for(var r=0;r<n.length;r++)if(typeof e.style[n[r]]!="undefined"){t.trstyle=n[r];break}t.hastransform=t.trstyle!=0,t.hastransform&&(e.style[t.trstyle]="translate3d(1px,2px,3px)",t.hastranslate3d=/translate3d/.test(e.style[t.trstyle])),t.transitionstyle=!1,t.prefixstyle="",t.transitionend=!1;var n=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"],i=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],s=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"];for(var r=0;r<n.length;r++)if(n[r]in e.style){t.transitionstyle=n[r],t.prefixstyle=i[r],t.transitionend=s[r];break}return t.hastransition=t.transitionstyle,t.cursorgrabvalue=o(),t.hasmousecapture="setCapture"in e,e=null,h=t,t},d=function(e,r){function g(e,t,n){var r=e.css(t),i=parseFloat(r);if(isNaN(i)){i=m[r]||0;var s=i==3?n?u.win.outerHeight()-u.win.innerHeight():u.win.outerWidth()-u.win.innerWidth():1;return u.isie8&&i&&(i+=1),s?i:0}return i}function y(e,t){var n=0,r=0;if("wheelDeltaY"in e)n=e.wheelDeltaX,r=e.wheelDeltaY;else{var i=e.detail?e.detail*-1:e.wheelDelta/40;i&&(t?n=Math.floor(i*u.opt.mousescrollstep):r=Math.floor(i*u.opt.mousescrollstep))}n&&(u.scrollmom&&u.scrollmom.stop(),u.lastdeltax+=n,u.synched("mousewheelx",function(){var e=u.lastdeltax;u.lastdeltax=0,u.rail.drag||u.doScrollLeftBy(e)})),r&&(u.scrollmom&&u.scrollmom.stop(),u.lastdeltay+=r,u.synched("mousewheely",function(){var e=u.lastdeltay;u.lastdeltay=0,u.rail.drag||u.doScrollBy(e)}))}var u=this;this.version="3.0.0 RC8",this.name="nicescroll",this.me=r,this.opt={doc:o("body"),win:!1,zindex:9e3,cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:20,preservenativescrolling:!0,railoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0},this.opt.snapbackspeed=80;if(e||!1)for(var a in u.opt)typeof e[a]!="undefined"&&(u.opt[a]=e[a]);this.doc=u.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/BODY|HTML/.test(u.opt.win?u.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=u.opt.win!==!1,this.win=u.opt.win||(this.ispage?o(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?o(window):this.win,this.body=o("body"),this.isfixed=!1,this.iframe=!1,this.isiframe=this.doc[0].nodeName=="IFRAME"&&this.win[0].nodeName=="IFRAME",this.istextarea=this.win[0].nodeName=="TEXTAREA",this.forcescreen=!1,this.canshowonmouseevent=u.opt.autohidemode!="scroll",this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1;do this.id="ascrail"+s++;while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.nativescrollingarea=!1,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0;var h=this.detected=p();this.canhwscroll=h.hastransform&&u.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&u.haswrapper,this.istouchcapable=!1,h.cantouch&&h.ischrome&&!h.isios&&(this.istouchcapable=!0,h.cantouch=!1),this.delayed=function(e,t,n,r){var i=u.delaylist[e],s=(new Date).getTime();if(!r&&i&&i.tt)return!1;i&&i.tt&&clearTimeout(i.tt);if(i&&i.last+n>s&&!i.tt)u.delaylist[e]={last:s+n,tt:setTimeout(function(){u.delaylist[e].tt=0,t.call()},n)};else if(!i||!i.tt)u.delaylist[e]={last:s,tt:0},setTimeout(function(){t.call()},0)},this.synched=function(e,t){function n(){if(u.onsync)return;l(function(){u.onsync=!1;for(e in u.synclist){var t=u.synclist[e];t&&t.call(u),u.synclist[e]=!1}}),u.onsync=!0}return u.synclist[e]=t,n(),e},this.unsynched=function(e){u.synclist[e]&&(u.synclist[e]=!1)},this.css=function(e,t){for(var n in t)u.saved.css.push([e,n,e.css(n)]),e.css(n,t[n])},this.scrollTop=function(e){return typeof e=="undefined"?u.getScrollTop():u.setScrollTop(e)},this.scrollLeft=function(e){return typeof e=="undefined"?u.getScrollLeft():u.setScrollLeft(e)},BezierClass=function(e,t,n,r,i,s,o){this.st=e,this.ed=t,this.spd=n,this.p1=r||0,this.p2=i||1,this.p3=s||0,this.p4=o||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)},getNow:function(){var e=(new Date).getTime(),t=1-(e-this.ts)/this.spd,n=this.B2(t)+this.B3(t)+this.B4(t);return t<0?this.ed:this.st+Math.round(this.df*n)},update:function(e,t){return this.st=this.getNow(),this.ed=e,this.spd=t,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}};if(this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},h.hastranslate3d&&h.isios&&this.doc.css("-webkit-backface-visibility","hidden");function d(){var e=u.doc.css(h.trstyle);return e&&e.substr(0,6)=="matrix"?e.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1}this.getScrollTop=function(e){if(!e){var t=d();if(t)return t.length==16?-t[13]:-t[5];if(u.timerscroll&&u.timerscroll.bz)return u.timerscroll.bz.getNow()}return u.doc.translate.y},this.getScrollLeft=function(e){if(!e){var t=d();if(t)return t.length==16?-t[12]:-t[4];if(u.timerscroll&&u.timerscroll.bh)return u.timerscroll.bh.getNow()}return u.doc.translate.x},document.createEvent?this.notifyScrollEvent=function(e){var t=document.createEvent("UIEvents");t.initUIEvent("scroll",!1,!0,window,1),e.dispatchEvent(t)}:document.fireEvent?this.notifyScrollEvent=function(e){var t=document.createEventObject();e.fireEvent("onscroll"),t.cancelBubble=!0}:this.notifyScrollEvent=function(e,t){},h.hastranslate3d&&u.opt.enabletranslate3d?(this.setScrollTop=function(e,t){u.doc.translate.y=e,u.doc.translate.ty=e*-1+"px",u.doc.css(h.trstyle,"translate3d("+u.doc.translate.tx+","+u.doc.translate.ty+",0px)"),t||u.notifyScrollEvent(u.win[0])},this.setScrollLeft=function(e,t){u.doc.translate.x=e,u.doc.translate.tx=e*-1+"px",u.doc.css(h.trstyle,"translate3d("+u.doc.translate.tx+","+u.doc.translate.ty+",0px)"),t||u.notifyScrollEvent(u.win[0])}):(this.setScrollTop=function(e,t){u.doc.translate.y=e,u.doc.translate.ty=e*-1+"px",u.doc.css(h.trstyle,"translate("+u.doc.translate.tx+","+u.doc.translate.ty+")"),t||u.notifyScrollEvent(u.win[0])},this.setScrollLeft=function(e,t){u.doc.translate.x=e,u.doc.translate.tx=e*-1+"px",u.doc.css(h.trstyle,"translate("+u.doc.translate.tx+","+u.doc.translate.ty+")"),t||u.notifyScrollEvent(u.win[0])})}else this.getScrollTop=function(){return u.docscroll.scrollTop()},this.setScrollTop=function(e){return u.docscroll.scrollTop(e)},this.getScrollLeft=function(){return u.docscroll.scrollLeft()},this.setScrollLeft=function(e){return u.docscroll.scrollLeft(e)};this.getTarget=function(e){return e?e.target?e.target:e.srcElement?e.srcElement:!1:!1},this.hasParent=function(e,t){if(!e)return!1;var n=e.target||e.srcElement||e||!1;while(n&&n.id!=t)n=n.parentNode||!1;return n!==!1};var m={thin:1,medium:3,thick:5};this.updateScrollBar=function(e){if(u.ishwscroll)u.rail.css({height:u.win.innerHeight()}),u.railh&&u.railh.css({width:u.win.innerWidth()});else{var t=u.isfixed?{top:parseFloat(u.win.css("top")),left:parseFloat(u.win.css("left"))}:u.win.offset(),n={top:t.top,left:t.left};n.top+=g(u.win,"border-top-width",!0);var r=(u.win.outerWidth()-u.win.innerWidth())/2;n.left+=u.rail.align?u.win.outerWidth()-g(u.win,"border-right-width")-u.rail.width:g(u.win,"border-left-width");var i=u.opt.railoffset;i&&(i.top&&(n.top+=i.top),u.rail.align&&i.left&&(n.left+=i.left)),u.locked||u.rail.css({top:n.top,left:n.left,height:e?e.h:u.win.innerHeight()}),u.zoom&&u.zoom.css({top:n.top+1,left:u.rail.align==1?n.left-20:n.left+u.rail.width+4});if(u.railh&&!u.locked){var n={top:t.top,left:t.left},s=u.railh.align?n.top+g(u.win,"border-top-width",!0)+u.win.innerHeight()-u.railh.height:n.top+g(u.win,"border-top-width",!0),o=n.left+g(u.win,"border-left-width");u.railh.css({top:s,left:o,width:u.railh.width})}}},u.hasanimationframe=l,u.hascancelanimationframe=c,u.hasanimationframe?u.hascancelanimationframe||(c=function(){u.cancelAnimationFrame=!0}):(l=function(e){return setTimeout(e,16)},c=clearInterval),this.init=function(){u.saved.css=[];if(h.isie7mobile)return!0;h.hasmstouch&&u.css(u.ispage?o("html"):u.win,{"-ms-touch-action":"none"});if(!u.ispage||!h.cantouch&&!h.isieold&&!h.isie9mobile){var e=u.docscroll;u.ispage&&(e=u.haswrapper?u.win:u.doc),h.isie9mobile||u.css(e,{"overflow-y":"hidden"}),u.ispage&&h.isie7&&(u.doc[0].nodeName=="BODY"?u.css(o("html"),{"overflow-y":"hidden"}):u.doc[0].nodeName=="HTML"&&u.css(o("body"),{"overflow-y":"hidden"})),h.isios&&!u.ispage&&!u.haswrapper&&u.css(o("body"),{"-webkit-overflow-scrolling":"touch"});var r=o(document.createElement("div"));r.css({position:"relative",top:0,"float":"right",width:u.opt.cursorwidth,height:"0px","background-color":u.opt.cursorcolor,border:u.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":u.opt.cursorborderradius,"-moz-border-radius":u.opt.cursorborderradius,"border-radius":u.opt.cursorborderradius}),r.hborder=parseFloat(r.outerHeight()-r.innerHeight()),u.cursor=r;var s=o(document.createElement("div"));s.attr("id",u.id);var a,l,c=["left","right"];for(var p in c)l=c[p],a=u.opt.railpadding[l],a?s.css("padding-"+l,a+"px"):u.opt.railpadding[l]=0;s.append(r),s.width=Math.max(parseFloat(u.opt.cursorwidth),r.outerWidth())+u.opt.railpadding.left+u.opt.railpadding.right,s.css({width:s.width+"px",zIndex:u.ispage?u.opt.zindex:u.opt.zindex+2,background:u.opt.background}),s.visibility=!0,s.scrollable=!0,s.align=u.opt.railalign=="left"?0:1,u.rail=s,u.rail.drag=!1;var d=!1;u.opt.boxzoom&&!u.ispage&&!h.isieold&&(d=document.createElement("div"),u.bind(d,"click",u.doZoom),u.zoom=o(d),u.zoom.css({cursor:"pointer","z-index":u.opt.zindex,backgroundImage:"url("+f+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),u.opt.dblclickzoom&&u.bind(u.win,"dblclick",u.doZoom),h.cantouch&&u.opt.gesturezoom&&(u.ongesturezoom=function(e){return e.scale>1.5&&u.doZoomIn(e),e.scale<.8&&u.doZoomOut(e),u.cancelEvent(e)},u.bind(u.win,"gestureend",u.ongesturezoom))),u.railh=!1;if(u.opt.horizrailenabled){u.css(e,{"overflow-x":"hidden"});var r=o(document.createElement("div"));r.css({position:"relative",top:0,height:u.opt.cursorwidth,width:"0px","background-color":u.opt.cursorcolor,border:u.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":u.opt.cursorborderradius,"-moz-border-radius":u.opt.cursorborderradius,"border-radius":u.opt.cursorborderradius}),r.wborder=parseFloat(r.outerWidth()-r.innerWidth()),u.cursorh=r;var m=o(document.createElement("div"));m.attr("id",u.id+"-hr"),m.height=1+Math.max(parseFloat(u.opt.cursorwidth),r.outerHeight()),m.css({height:m.height+"px",zIndex:u.ispage?u.opt.zindex:u.opt.zindex+2,background:u.opt.background}),m.append(r),m.visibility=!0,m.scrollable=!0,m.align=u.opt.railvalign=="top"?0:1,u.railh=m,u.railh.drag=!1}if(u.ispage)s.css({position:"fixed",top:"0px",height:"100%"}),s.align?s.css({right:"0px"}):s.css({left:"0px"}),u.body.append(s),u.railh&&(m.css({position:"fixed",left:"0px",width:"100%"}),m.align?m.css({bottom:"0px"}):m.css({top:"0px"}),u.body.append(m));else{if(u.ishwscroll){u.win.css("position")=="static"&&u.css(u.win,{position:"relative"});var g=u.win[0].nodeName=="HTML"?u.body:u.win;u.zoom&&(u.zoom.css({position:"absolute",top:1,right:0,"margin-right":s.width+4}),g.append(u.zoom)),s.css({position:"absolute",top:0}),s.align?s.css({right:0}):s.css({left:0}),g.append(s),m&&(m.css({position:"absolute",left:0,bottom:0}),m.align?m.css({bottom:0}):m.css({top:0}),g.append(m))}else{u.isfixed=u.win.css("position")=="fixed";var y=u.isfixed?"fixed":"absolute";s.css({position:y}),u.zoom&&u.zoom.css({position:y}),u.updateScrollBar(),u.body.append(s),u.zoom&&u.body.append(u.zoom),u.railh&&(m.css({position:y}),u.body.append(m))}h.isios&&u.css(u.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),h.isie&&u.opt.disableoutline&&u.win.attr("hideFocus","true")}u.opt.autohidemode===!1?u.autohidedom=!1:u.opt.autohidemode===!0?(u.autohidedom=o().add(u.rail),u.railh&&(u.autohidedom=u.autohidedom.add(u.railh))):u.opt.autohidemode=="scroll"?(u.autohidedom=o().add(u.rail),u.railh&&(u.autohidedom=u.autohidedom.add(u.railh))):u.opt.autohidemode=="cursor"?(u.autohidedom=o().add(u.cursor),u.railh&&(u.autohidedom=u.autohidedom.add(u.railh.cursor))):u.opt.autohidemode=="hidden"&&(u.autohidedom=!1,u.hide(),u.locked=!1);if(h.isie9mobile){u.scrollmom=new v(u),u.onmangotouch=function(e){var t=u.getScrollTop(),n=u.getScrollLeft();if(t==u.scrollmom.lastscrolly&&n==u.scrollmom.lastscrollx)return!0;var r=t-u.mangotouch.sy,i=n-u.mangotouch.sx,s=Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));if(s==0)return;var o=r<0?-1:1,a=i<0?-1:1,f=+(new Date);u.mangotouch.lazy&&clearTimeout(u.mangotouch.lazy);if(f-u.mangotouch.tm>80||u.mangotouch.dry!=o||u.mangotouch.drx!=a)u.scrollmom.stop(),u.scrollmom.reset(n,t),u.mangotouch.sy=t,u.mangotouch.ly=t,u.mangotouch.sx=n,u.mangotouch.lx=n,u.mangotouch.dry=o,u.mangotouch.drx=a,u.mangotouch.tm=f;else{u.scrollmom.stop(),u.scrollmom.update(u.mangotouch.sx-i,u.mangotouch.sy-r);var l=f-u.mangotouch.tm;u.mangotouch.tm=f;var c=Math.max(Math.abs(u.mangotouch.ly-t),Math.abs(u.mangotouch.lx-n));u.mangotouch.ly=t,u.mangotouch.lx=n,c>2&&(u.mangotouch.lazy=setTimeout(function(){u.mangotouch.lazy=!1,u.mangotouch.dry=0,u.mangotouch.drx=0,u.mangotouch.tm=0,u.scrollmom.doMomentum(30)},100))}};var b=u.getScrollTop(),w=u.getScrollLeft();u.mangotouch={sy:b,ly:b,dry:0,sx:w,lx:w,drx:0,lazy:!1,tm:0},u.bind(u.docscroll,"scroll",u.onmangotouch)}else{if(h.cantouch||u.opt.touchbehavior||h.hasmstouch){u.scrollmom=new v(u),u.ontouchstart=function(e){if(e.pointerType&&e.pointerType!=2)return!1;if(!u.locked){if(h.hasmstouch){var t=e.target?e.target:!1;while(t){var n=o(t).getNiceScroll();if(n.length>0&&n[0].me==u.me)break;if(n.length>0)return!1;if(t.nodeName=="DIV"&&t.id==u.id)break;t=t.parentNode?t.parentNode:!1}}u.cancelScroll();var t=u.getTarget(e);if(t){var r=/INPUT/i.test(t.nodeName)&&/range/i.test(t.type);if(r)return u.stopPropagation(e)}if(u.forcescreen){var i=e,e={original:e.original?e.original:e};e.clientX=i.screenX,e.clientY=i.screenY}u.rail.drag={x:e.clientX,y:e.clientY,sx:u.scroll.x,sy:u.scroll.y,st:u.getScrollTop(),sl:u.getScrollLeft(),pt:2};if(u.opt.touchbehavior&&u.isiframe&&h.isie){var s=u.win.position();u.rail.drag.x+=s.left,u.rail.drag.y+=s.top}u.hasmoving=!1,u.lastmouseup=!1,u.scrollmom.reset(e.clientX,e.clientY);if(!h.cantouch&&!this.istouchcapable&&!h.hasmstouch){var a=t?/INPUT|SELECT|TEXTAREA/i.test(t.nodeName):!1;if(!a)return!u.ispage&&h.hasmousecapture&&t.setCapture(),u.cancelEvent(e);/SUBMIT|CANCEL|BUTTON/i.test(o(t).attr("type"))&&(pc={tg:t,click:!1},u.preventclick=pc)}}},u.ontouchend=function(e){if(e.pointerType&&e.pointerType!=2)return!1;if(u.rail.drag&&u.rail.drag.pt==2){u.scrollmom.doMomentum(),u.rail.drag=!1;if(u.hasmoving){u.hasmoving=!1,u.lastmouseup=!0,u.hideCursor(),h.hasmousecapture&&document.releaseCapture();if(!h.cantouch)return u.cancelEvent(e)}}};var E=u.opt.touchbehavior&&u.isiframe&&!h.hasmousecapture;u.ontouchmove=function(e,t){if(e.pointerType&&e.pointerType!=2)return!1;if(u.rail.drag&&u.rail.drag.pt==2){if(h.cantouch&&typeof e.original=="undefined")return!0;u.hasmoving=!0,u.preventclick&&!u.preventclick.click&&(u.preventclick.click=u.preventclick.tg.onclick||!1,u.preventclick.tg.onclick=u.onpreventclick);if(u.forcescreen){var n=e,e={original:e.original?e.original:e};e.clientX=n.screenX,e.clientY=n.screenY}var r=ofy=0;if(E&&!t){var i=u.win.position();r=-i.left,ofy=-i.top}var s=e.clientY+ofy,o=s-u.rail.drag.y,a=u.rail.drag.st-o;u.ishwscroll&&u.opt.bouncescroll?a<0?a=Math.round(a/2):a>u.page.maxh&&(a=u.page.maxh+Math.round((a-u.page.maxh)/2)):(a<0&&(a=0,s=0),a>u.page.maxh&&(a=u.page.maxh,s=0));var f=e.clientX+r;if(u.railh&&u.railh.scrollable){var l=f-u.rail.drag.x,c=u.rail.drag.sl-l;u.ishwscroll&&u.opt.bouncescroll?c<0?c=Math.round(c/2):c>u.page.maxw&&(c=u.page.maxw+Math.round((c-u.page.maxw)/2)):(c<0&&(c=0,f=0),c>u.page.maxw&&(c=u.page.maxw,f=0))}return u.synched("touchmove",function(){u.rail.drag&&u.rail.drag.pt==2&&(u.prepareTransition&&u.prepareTransition(0),u.rail.scrollable&&u.setScrollTop(a),u.scrollmom.update(f,s),u.railh&&u.railh.scrollable?(u.setScrollLeft(c),u.showCursor(a,c)):u.showCursor(a),h.isie10&&document.selection.clear())}),u.cancelEvent(e)}}}h.cantouch||u.opt.touchbehavior?(u.onpreventclick=function(e){if(u.preventclick)return u.preventclick.tg.onclick=u.preventclick.click,u.preventclick=!1,u.cancelEvent(e)},u.onmousedown=u.ontouchstart,u.onmouseup=u.ontouchend,u.onclick=h.isios?!1:function(e){return u.lastmouseup?(u.lastmouseup=!1,u.cancelEvent(e)):!0},u.onmousemove=u.ontouchmove,h.cursorgrabvalue&&(u.css(u.ispage?u.doc:u.win,{cursor:h.cursorgrabvalue}),u.css(u.rail,{cursor:h.cursorgrabvalue}))):(u.onmousedown=function(e,t){if(u.rail.drag&&u.rail.drag.pt!=1)return;if(u.locked)return u.cancelEvent(e);u.cancelScroll(),u.rail.drag={x:e.clientX,y:e.clientY,sx:u.scroll.x,sy:u.scroll.y,pt:1,hr:!!t};var n=u.getTarget(e);return!u.ispage&&h.hasmousecapture&&n.setCapture(),u.cancelEvent(e)},u.onmouseup=function(e){if(u.rail.drag){h.hasmousecapture&&document.releaseCapture();if(u.rail.drag.pt!=1)return;return u.rail.drag=!1,u.cancelEvent(e)}},u.onmousemove=function(e){if(u.rail.drag){if(u.rail.drag.pt!=1)return;u.cursorfreezed=!0;if(u.rail.drag.hr){u.scroll.x=u.rail.drag.sx+(e.clientX-u.rail.drag.x),u.scroll.x<0&&(u.scroll.x=0);var t=u.scrollvaluemaxw;u.scroll.x>t&&(u.scroll.x=t)}else{u.scroll.y=u.rail.drag.sy+(e.clientY-u.rail.drag.y),u.scroll.y<0&&(u.scroll.y=0);var n=u.scrollvaluemax;u.scroll.y>n&&(u.scroll.y=n)}return u.synched("mousemove",function(){u.rail.drag&&u.rail.drag.pt==1&&(u.showCursor(),u.rail.drag.hr?u.doScrollLeft(Math.round(u.scroll.x*u.scrollratio.x)):u.doScrollTop(Math.round(u.scroll.y*u.scrollratio.y)))}),u.cancelEvent(e)}u.checkarea=!0}),(h.cantouch||u.opt.touchbehavior)&&u.bind(u.win,"mousedown",u.onmousedown),h.hasmstouch&&(u.css(u.rail,{"-ms-touch-action":"none"}),u.css(u.cursor,{"-ms-touch-action":"none"}),u.bind(u.win,"MSPointerDown",u.ontouchstart),u.bind(document,"MSPointerUp",u.ontouchend),u.bind(document,"MSPointerMove",u.ontouchmove),u.bind(u.cursor,"MSGestureHold",function(e){e.preventDefault()}),u.bind(u.cursor,"contextmenu",function(e){e.preventDefault()})),this.istouchcapable&&(u.bind(u.win,"touchstart",u.ontouchstart),u.bind(document,"touchend",u.ontouchend),u.bind(document,"touchmove",u.ontouchmove)),u.bind(u.cursor,"mousedown",u.onmousedown),u.bind(u.cursor,"mouseup",u.onmouseup),u.railh&&(u.bind(u.cursorh,"mousedown",function(e){u.onmousedown(e,!0)}),u.bind(u.cursorh,"mouseup",function(e){if(u.rail.drag&&u.rail.drag.pt==2)return;return u.rail.drag=!1,u.hasmoving=!1,u.hideCursor(),h.hasmousecapture&&document.releaseCapture(),u.cancelEvent(e)})),u.bind(document,"mouseup",u.onmouseup),h.hasmousecapture&&u.bind(u.win,"mouseup",u.onmouseup),u.bind(document,"mousemove",u.onmousemove),u.onclick&&u.bind(document,"click",u.onclick),h.cantouch||(u.rail.mouseenter(function(){u.canshowonmouseevent&&u.showCursor(),u.rail.active=!0}),u.rail.mouseleave(function(){u.rail.active=!1,u.rail.drag||u.hideCursor()}),u.railh&&(u.railh.mouseenter(function(){u.canshowonmouseevent&&u.showCursor(),u.rail.active=!0}),u.railh.mouseleave(function(){u.rail.active=!1,u.rail.drag||u.hideCursor()})),u.opt.enablemousewheel&&(u.isiframe||u.bind(h.isie&&u.ispage?document:u.docscroll,"mousewheel",u.onmousewheel),u.bind(u.rail,"mousewheel",u.onmousewheel),u.railh&&u.bind(u.railh,"mousewheel",u.onmousewheelhr))),u.zoom&&(u.zoom.mouseenter(function(){u.canshowonmouseevent&&u.showCursor(),u.rail.active=!0}),u.zoom.mouseleave(function(){u.rail.active=!1,u.rail.drag||u.hideCursor()})),!u.ispage&&!h.cantouch&&!/HTML|BODY/.test(u.win[0].nodeName)&&(u.win.attr("tabindex")||u.win.attr({tabindex:i++}),h.ischrome&&u.opt.disableoutline&&u.win.css({outline:"none"}),u.win.focus(function(e){t=u.getTarget(e).id||!0,u.hasfocus=!0,u.canshowonmouseevent&&u.noticeCursor()}),u.win.blur(function(e){t=!1,u.hasfocus=!1}),u.win.mouseenter(function(e){n=u.getTarget(e).id||!0,u.hasmousefocus=!0,u.canshowonmouseevent&&u.noticeCursor()}),u.win.mouseleave(function(){n=!1,u.hasmousefocus=!1}))}u.onkeypress=function(e){if(u.locked&&u.page.maxh==0)return!0;e=e?e:window.e;var r=u.getTarget(e);if(r&&/INPUT|TEXTAREA|SELECT|OPTION/.test(r.nodeName)){var i=r.getAttribute("type")||r.type||!1;if(!i||!/submit|button|cancel/i.tp)return!0}if(u.hasfocus||u.hasmousefocus&&!t||u.ispage&&!t&&!n){var s=e.keyCode,o=e.ctrlKey||!1;if(u.locked&&s!=27)return u.cancelEvent(e);var a=!1;switch(s){case 38:case 63233:u.doScrollBy(72),a=!0;break;case 40:case 63235:u.doScrollBy(-72),a=!0;break;case 37:case 63232:u.railh&&(o?u.doScrollLeft(0):u.doScrollLeftBy(72),a=!0);break;case 39:case 63234:u.railh&&(o?u.doScrollLeft(u.page.maxw):u.doScrollLeftBy(-72),a=!0);break;case 33:case 63276:u.doScrollBy(u.view.h),a=!0;break;case 34:case 63277:u.doScrollBy(-u.view.h),a=!0;break;case 36:case 63273:u.railh&&o?u.doScrollPos(0,0):u.doScrollTo(0),a=!0;break;case 35:case 63275:u.railh&&o?u.doScrollPos(u.page.maxw,u.page.maxh):u.doScrollTo(u.page.maxh),a=!0;break;case 32:u.opt.spacebarenabled&&(u.doScrollBy(-u.view.h),a=!0);break;case 27:u.zoomactive&&(u.doZoom(),a=!0)}if(a)return u.cancelEvent(e)}},u.opt.enablekeyboard&&u.bind(document,h.isopera?"keypress":"keydown",u.onkeypress),u.bind(window,"resize",u.resize),u.bind(window,"orientationchange",u.resize),u.bind(window,"load",u.resize),u.onAttributeChange=function(e){u.lazyResize()},!u.ispage&&!u.haswrapper&&("WebKitMutationObserver"in window?(u.observer=new WebKitMutationObserver(function(e){e.forEach(u.onAttributeChange)}),u.observer.observe(u.win[0],{attributes:!0,subtree:!1})):(u.bind(u.win,h.isie&&!h.isie9?"propertychange":"DOMAttrModified",u.onAttributeChange),h.isie9&&u.win[0].attachEvent("onpropertychange",u.onAttributeChange))),!u.ispage&&u.opt.boxzoom&&u.bind(window,"resize",u.resizeZoom),u.istextarea&&u.bind(u.win,"mouseup",u.resize),u.resize()}if(this.doc[0].nodeName=="IFRAME"){function S(e){u.iframexd=!1;try{var t="contentDocument"in this?this.contentDocument:this.contentWindow.document,n=t.domain}catch(e){u.iframexd=!0,t=!1}if(u.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;u.forcescreen=!0,u.isiframe&&(u.iframe={html:u.doc.contents().find("html")[0],body:u.doc.contents().find("body")[0]},u.getContentSize=function(){return{w:Math.max(u.iframe.html.scrollWidth,u.iframe.body.scrollWidth),h:Math.max(u.iframe.html.scrollHeight,u.iframe.body.scrollHeight)}},u.docscroll=o(this.contentWindow));if(!h.isios&&u.opt.iframeautoresize&&!u.isiframe){u.win.scrollTop(0),u.doc.height("");var r=Math.max(t.getElementsByTagName("html")[0].scrollHeight,t.body.scrollHeight);u.doc.height(r)}u.resize(),h.isie7&&u.css(o(t).find("html"),{"overflow-y":"hidden"}),u.css(o(t.body),{"overflow-y":"hidden"}),"contentWindow"in this?u.bind(this.contentWindow,"scroll",u.onscroll):u.bind(t,"scroll",u.onscroll),u.opt.enablemousewheel&&u.bind(t,"mousewheel",u.onmousewheel),u.opt.enablekeyboard&&u.bind(t,h.isopera?"keypress":"keydown",u.onkeypress);if(h.cantouch||u.opt.touchbehavior)u.bind(t,"mousedown",u.onmousedown),h.cursorgrabvalue&&u.css(o(t.body),{cursor:h.cursorgrabvalue});u.bind(t,"mouseup",u.onmouseup),u.bind(t,"mousemove",function(e){u.onmousemove(e,!0)}),u.zoom&&(u.opt.dblclickzoom&&u.bind(t,"dblclick",u.doZoom),u.ongesturezoom&&u.bind(t,"gestureend",u.ongesturezoom))}this.doc[0].readyState&&this.doc[0].readyState=="complete"&&setTimeout(function(){S.call(u.doc[0],!1)},500),u.bind(this.doc,"load",S)}},this.showCursor=function(e,t){u.cursortimeout&&(clearTimeout(u.cursortimeout),u.cursortimeout=0);if(!u.rail)return;u.autohidedom&&(u.autohidedom.stop().css({opacity:u.opt.cursoropacitymax}),u.cursoractive=!0),typeof e!="undefined"&&e!==!1&&(u.scroll.y=Math.round(e*1/u.scrollratio.y)),typeof t!="undefined"&&(u.scroll.x=Math.round(t*1/u.scrollratio.x)),u.cursor.css({height:u.cursorheight,top:u.scroll.y}),u.cursorh&&(!u.rail.align&&u.rail.visibility?u.cursorh.css({width:u.cursorwidth,left:u.scroll.x+u.rail.width}):u.cursorh.css({width:u.cursorwidth,left:u.scroll.x}),u.cursoractive=!0),u.zoom&&u.zoom.stop().css({opacity:u.opt.cursoropacitymax})},this.hideCursor=function(e){if(u.cursortimeout)return;if(!u.rail)return;if(!u.autohidedom)return;u.cursortimeout=setTimeout(function(){if(!u.rail.active||!u.showonmouseevent)u.autohidedom.stop().animate({opacity:u.opt.cursoropacitymin}),u.zoom&&u.zoom.stop().animate({opacity:u.opt.cursoropacitymin}),u.cursoractive=!1;u.cursortimeout=0},e||400)},this.noticeCursor=function(e,t,n){u.showCursor(t,n),u.hideCursor(e)},this.getContentSize=u.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:u.haswrapper?function(){return{w:u.doc.outerWidth()+parseInt(u.win.css("paddingLeft"))+parseInt(u.win.css("paddingRight")),h:u.doc.outerHeight()+parseInt(u.win.css("paddingTop"))+parseInt(u.win.css("paddingBottom"))}}:function(){return{w:u.docscroll[0].scrollWidth,h:u.docscroll[0].scrollHeight}},this.onResize=function(e,t){if(!u.win)return!1;if(!u.haswrapper&&!u.ispage){if(u.win.css("display")=="none")return u.visibility&&u.hideRail().hideRailHr(),!1;!u.hidden&&!u.visibility&&u.showRail().showRailHr()}var n=u.page.maxh,r=u.page.maxw,i={h:u.view.h,w:u.view.w};u.view={w:u.ispage?u.win.width():parseInt(u.win[0].clientWidth),h:u.ispage?u.win.height():parseInt(u.win[0].clientHeight)},u.page=t?t:u.getContentSize(),u.page.maxh=Math.max(0,u.page.h-u.view.h),u.page.maxw=Math.max(0,u.page.w-u.view.w);if(u.page.maxh==n&&u.page.maxw==r&&u.view.w==i.w){if(!!u.ispage)return u;var s=u.win.offset();if(u.lastposition){var o=u.lastposition;if(o.top==s.top&&o.left==s.left)return u}u.lastposition=s}u.page.maxh==0?(u.hideRail(),u.scrollvaluemax=0,u.scroll.y=0,u.scrollratio.y=0,u.cursorheight=0,u.setScrollTop(0),u.rail.scrollable=!1):u.rail.scrollable=!0,u.page.maxw==0?(u.hideRailHr(),u.scrollvaluemaxw=0,u.scroll.x=0,u.scrollratio.x=0,u.cursorwidth=0,u.setScrollLeft(0),u.railh.scrollable=!1):u.railh.scrollable=!0,u.locked=u.page.maxh==0&&u.page.maxw==0;if(u.locked)return u.ispage||u.updateScrollBar(u.view),!1;!u.hidden&&!u.visibility?u.showRail().showRailHr():!u.hidden&&!u.railh.visibility&&u.showRailHr(),u.istextarea&&u.win.css("resize")&&u.win.css("resize")!="none"&&(u.view.h-=20),u.ispage||u.updateScrollBar(u.view),u.cursorheight=Math.min(u.view.h,Math.round(u.view.h*(u.view.h/u.page.h))),u.cursorheight=Math.max(u.opt.cursorminheight,u.cursorheight),u.cursorwidth=Math.min(u.view.w,Math.round(u.view.w*(u.view.w/u.page.w))),u.cursorwidth=Math.max(u.opt.cursorminheight,u.cursorwidth),u.scrollvaluemax=u.view.h-u.cursorheight-u.cursor.hborder,u.railh&&(u.railh.width=u.page.maxh>0?u.view.w-u.rail.width:u.view.w,u.scrollvaluemaxw=u.railh.width-u.cursorwidth-u.cursorh.wborder),u.scrollratio={x:u.page.maxw/u.scrollvaluemaxw,y:u.page.maxh/u.scrollvaluemax};var a=u.getScrollTop();return a>u.page.maxh?u.doScroll(u.page.maxh):(u.scroll.y=Math.round(u.getScrollTop()*(1/u.scrollratio.y)),u.scroll.x=Math.round(u.getScrollLeft()*(1/u.scrollratio.x)),u.cursoractive&&u.noticeCursor()),u.scroll.y&&u.getScrollTop()==0&&u.doScrollTo(Math.floor(u.scroll.y*u.scrollratio.y)),u},this.resize=function(){u.delayed("resize",u.onResize,30)},this.lazyResize=function(){u.delayed("resize",u.resize,250)},this._bind=function(e,t,n,r){u.events.push({e:e,n:t,f:n,b:r}),e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},this.bind=function(e,t,n,r){var i="jquery"in e?e[0]:e;if(i.addEventListener){if(h.cantouch&&/mouseup|mousedown|mousemove/.test(t)){var s=t=="mousedown"?"touchstart":t=="mouseup"?"touchend":"touchmove";u._bind(i,s,function(e){if(e.touches){if(e.touches.length<2){var t=e.touches.length?e.touches[0]:e;t.original=e,n.call(this,t)}}else if(e.changedTouches){var t=e.changedTouches[0];t.original=e,n.call(this,t)}},r||!1)}u._bind(i,t,n,r||!1),t=="mousewheel"&&u._bind(i,"DOMMouseScroll",n,r||!1),h.cantouch&&t=="mouseup"&&u._bind(i,"touchcancel",n,r||!1)}else u._bind(i,t,function(e){return e=e||window.event||!1,e&&e.srcElement&&(e.target=e.srcElement),n.call(i,e)===!1||r===!1?u.cancelEvent(e):!0})},this._unbind=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=!1},this.unbindAll=function(){for(var e=0;e<u.events.length;e++){var t=u.events[e];u._unbind(t.e,t.n,t.f,t.b)}},this.cancelEvent=function(e){var e=e.original?e.original:e?e:window.event||!1;return e?(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1):!1},this.stopPropagation=function(e){var e=e.original?e.original:e?e:window.event||!1;return e?e.stopPropagation?e.stopPropagation():(e.cancelBubble&&(e.cancelBubble=!0),!1):!1},this.showRail=function(){return u.page.maxh!=0&&(u.ispage||u.win.css("display")!="none")&&(u.visibility=!0,u.rail.visibility=!0,u.rail.css("display","block")),u},this.showRailHr=function(){return u.railh?(u.page.maxw!=0&&(u.ispage||u.win.css("display")!="none")&&(u.railh.visibility=!0,u.railh.css("display","block")),u):u},this.hideRail=function(){return u.visibility=!1,u.rail.visibility=!1,u.rail.css("display","none"),u},this.hideRailHr=function(){return u.railh?(u.railh.visibility=!1,u.railh.css("display","none"),u):u},this.show=function(){return u.hidden=!1,u.locked=!1,u.showRail().showRailHr()},this.hide=function(){return u.hidden=!0,u.locked=!0,u.hideRail().hideRailHr()},this.remove=function(){u.doZoomOut(),u.unbindAll(),u.observer!==!1&&u.observer.disconnect(),u.events=[],u.cursor&&(u.cursor.remove(),u.cursor=null),u.cursorh&&(u.cursorh.remove(),u.cursorh=null),u.rail&&(u.rail.remove(),u.rail=null),u.railh&&(u.railh.remove(),u.railh=null),u.zoom&&(u.zoom.remove(),u.zoom=null);for(var e=0;e<u.saved.css.length;e++){var t=u.saved.css[e];t[0].css(t[1],typeof t[2]=="undefined"?"":t[2])}return u.saved=!1,u.me.data("__nicescroll",""),u.me=null,u.doc=null,u.docscroll=null,u.win=null,u},this.scrollstart=function(e){return this.onscrollstart=e,u},this.scrollend=function(e){return this.onscrollend=e,u},this.scrollcancel=function(e){return this.onscrollcancel=e,u},this.zoomin=function(e){return this.onzoomin=e,u},this.zoomout=function(e){return this.onzoomout=e,u},this.isScrollable=function(e){var t=e.target?e.target:e;while(t&&t.nodeType==1&&!/BODY|HTML/.test(t.nodeName)){var n=o(t),r=n.css("overflowY")||n.css("overflowX")||n.css("overflow")||"";if(/scroll|auto/.test(r))return t.clientHeight!=t.scrollHeight;t=t.parentNode?t.parentNode:!1}return!1},this.onmousewheel=function(e){return u.locked?!0:u.rail.scrollable?(u.opt.preservenativescrolling&&u.checkarea&&(u.checkarea=!1,u.nativescrollingarea=u.isScrollable(e)),u.nativescrollingarea?!0:u.locked?u.cancelEvent(e):u.rail.drag?u.cancelEvent(e):(y(e,!1),u.cancelEvent(e))):u.railh&&u.railh.scrollable?u.onmousewheelhr(e):!0},this.onmousewheelhr=function(e){return u.locked||!u.railh.scrollable?!0:(u.opt.preservenativescrolling&&u.checkarea&&(u.checkarea=!1,u.nativescrollingarea=u.isScrollable(e)),u.nativescrollingarea?!0:u.locked?u.cancelEvent(e):u.rail.drag?u.cancelEvent(e):(y(e,!0),u.cancelEvent(e)))},this.stop=function(){return u.cancelScroll(),u.scrollmon&&u.scrollmon.stop(),u.cursorfreezed=!1,u.scroll.y=Math.round(u.getScrollTop()*(1/u.scrollratio.y)),u.noticeCursor(),u},this.getTransitionSpeed=function(e){var t=Math.round(u.opt.scrollspeed*10),n=Math.min(t,Math.round(e/20*u.opt.scrollspeed));return n>20?n:0},u.opt.smoothscroll?u.ishwscroll&&h.hastransition&&u.opt.usetransition?(this.prepareTransition=function(e,t){var n=t?e>20?e:0:u.getTransitionSpeed(e),r=n?h.prefixstyle+"transform "+n+"ms ease-out":"";if(!u.lasttransitionstyle||u.lasttransitionstyle!=r)u.lasttransitionstyle=r,u.doc.css(h.transitionstyle,r);return n},this.doScrollLeft=function(e,t){var n=u.scrollrunning?u.newscrolly:u.getScrollTop();u.doScrollPos(e,n,t)},this.doScrollTop=function(e,t){var n=u.scrollrunning?u.newscrollx:u.getScrollLeft();u.doScrollPos(n,e,t)},this.doScrollPos=function(e,t,n){var r=u.getScrollTop(),i=u.getScrollLeft();((u.newscrolly-r)*(t-r)<0||(u.newscrollx-i)*(e-i)<0)&&u.cancelScroll(),u.newscrolly=t,u.newscrollx=e,u.newscrollspeed=n||!1;if(u.timer)return!1;u.timer=setTimeout(function(){var n=u.getScrollTop(),r=u.getScrollLeft(),i={};i.x=e-r,i.y=t-n,i.px=r,i.py=n;var s=Math.round(Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))),o=u.newscrollspeed?u.newscrollspeed:s,a=u.prepareTransition(o);u.timerscroll&&u.timerscroll.tm&&clearInterval(u.timerscroll.tm);if(a>0){if(!u.scrollrunning&&u.onscrollstart){var f={type:"scrollstart",current:{x:r,y:n},request:{x:e,y:t},end:{x:u.newscrollx,y:u.newscrolly},speed:a};u.onscrollstart.call(u,f)}h.transitionend?u.scrollendtrapped||(u.scrollendtrapped=!0,u.bind(u.doc,h.transitionend,u.onScrollEnd,!1)):(u.scrollendtrapped&&clearTimeout(u.scrollendtrapped),u.scrollendtrapped=setTimeout(u.onScrollEnd,a));var l=n,c=r;u.timerscroll={bz:new BezierClass(l,u.newscrolly,a,0,0,.58,1),bh:new BezierClass(c,u.newscrollx,a,0,0,.58,1)},u.cursorfreezed||(u.timerscroll.tm=setInterval(function(){u.showCursor(u.getScrollTop(),u.getScrollLeft())},60))}u.synched("doScroll-set",function(){u.timer=0,u.scrollendtrapped&&(u.scrollrunning=!0),u.setScrollTop(u.newscrolly),u.setScrollLeft(u.newscrollx),u.scrollendtrapped||u.onScrollEnd()})},50)},this.cancelScroll=function(){if(!u.scrollendtrapped)return!0;var e=u.getScrollTop(),t=u.getScrollLeft();return u.scrollrunning=!1,h.transitionend||clearTimeout(h.transitionend),u.scrollendtrapped=!1,u._unbind(u.doc,h.transitionend,u.onScrollEnd),u.prepareTransition(0),u.setScrollTop(e),u.railh&&u.setScrollLeft(t),u.timerscroll&&u.timerscroll.tm&&clearInterval(u.timerscroll.tm),u.timerscroll=!1,u.cursorfreezed=!1,u.noticeCursor(!1,e,t),u},this.onScrollEnd=function(){u.scrollendtrapped&&u._unbind(u.doc,h.transitionend,u.onScrollEnd),u.scrollendtrapped=!1,u.prepareTransition(0),u.timerscroll&&u.timerscroll.tm&&clearInterval(u.timerscroll.tm),u.timerscroll=!1;var e=u.getScrollTop(),t=u.getScrollLeft();u.setScrollTop(e),u.railh&&u.setScrollLeft(t),u.noticeCursor(!1,e,t),u.cursorfreezed=!1,e<0?e=0:e>u.page.maxh&&(e=u.page.maxh),t<0?t=0:t>u.page.maxw&&(t=u.page.maxw);if(e!=u.newscrolly||t!=u.newscrollx)return u.doScrollPos(t,e,u.opt.snapbackspeed);if(u.onscrollend&&u.scrollrunning){var n={type:"scrollend",current:{x:t,y:e},end:{x:u.newscrollx,y:u.newscrolly}};u.onscrollend.call(u,n)}u.scrollrunning=!1}):(this.doScrollLeft=function(e){var t=u.scrollrunning?u.newscrolly:u.getScrollTop();u.doScrollPos(e,t)},this.doScrollTop=function(e){var t=u.scrollrunning?u.newscrollx:u.getScrollLeft();u.doScrollPos(t,e)},this.doScrollPos=function(e,t){function h(){if(u.cancelAnimationFrame)return!0;u.scrollrunning=!0,f=1-f;if(f)return u.timer=l(h)||1;var e=0,t=sy=u.getScrollTop();if(u.dst.ay){t=u.bzscroll?u.dst.py+u.bzscroll.getNow()*u.dst.ay:u.newscrolly;var n=t-sy;if(n<0&&t<u.newscrolly||n>0&&t>u.newscrolly)t=u.newscrolly;u.setScrollTop(t),t==u.newscrolly&&(e=1)}else e=1;var r=sx=u.getScrollLeft();if(u.dst.ax){r=u.bzscroll?u.dst.px+u.bzscroll.getNow()*u.dst.ax:u.newscrollx;var n=r-sx;if(n<0&&r<u.newscrollx||n>0&&r>u.newscrollx)r=u.newscrollx;u.setScrollLeft(r),r==u.newscrollx&&(e+=1)}else e+=1;if(e==2){u.timer=0,u.cursorfreezed=!1,u.bzscroll=!1,u.scrollrunning=!1,t<0?t=0:t>u.page.maxh&&(t=u.page.maxh),r<0?r=0:r>u.page.maxw&&(r=u.page.maxw);if(r!=u.newscrollx||t!=u.newscrolly)u.doScrollPos(r,t);else if(u.onscrollend){var i={type:"scrollend",current:{x:sx,y:sy},end:{x:u.newscrollx,y:u.newscrolly}};u.onscrollend.call(u,i)}}else u.timer=l(h)||1}var t=typeof t=="undefined"||t===!1?u.getScrollTop(!0):t;if(u.timer&&u.newscrolly==t&&u.newscrollx==e)return!0;u.timer&&c(u.timer),u.timer=0;var n=u.getScrollTop(),r=u.getScrollLeft();((u.newscrolly-n)*(t-n)<0||(u.newscrollx-r)*(e-r)<0)&&u.cancelScroll(),u.newscrolly=t,u.newscrollx=e;if(!u.bouncescroll||!u.rail.visibility)u.newscrolly<0?u.newscrolly=0:u.newscrolly>u.page.maxh&&(u.newscrolly=u.page.maxh);if(!u.bouncescroll||!u.railh.visibility)u.newscrollx<0?u.newscrollx=0:u.newscrollx>u.page.maxw&&(u.newscrollx=u.page.maxw);u.dst={},u.dst.x=e-r,u.dst.y=t-n,u.dst.px=r,u.dst.py=n;var i=Math.round(Math.sqrt(Math.pow(u.dst.x,2)+Math.pow(u.dst.y,2)));u.dst.ax=u.dst.x/i,u.dst.ay=u.dst.y/i;var s=0,o=i;u.dst.x==0?(s=n,o=t,u.dst.ay=1,u.dst.py=0):u.dst.y==0&&(s=r,o=e,u.dst.ax=1,u.dst.px=0);var a=u.getTransitionSpeed(i);a>0?u.bzscroll=u.bzscroll?u.bzscroll.update(o,a):new BezierClass(s,o,a,0,1,0,1):u.bzscroll=!1;if(u.timer)return;(n==u.page.maxh&&t>=u.page.maxh||r==u.page.maxw&&e>=u.page.maxw)&&u.checkContentSize();var f=1;u.cancelAnimationFrame=!1,u.timer=1;if(u.onscrollstart&&!u.scrollrunning){var p={type:"scrollstart",current:{x:r,y:n},request:{x:e,y:t},end:{x:u.newscrollx,y:u.newscrolly},speed:a};u.onscrollstart.call(u,p)}h(),(n==u.page.maxh&&t>=n||r==u.page.maxw&&e>=r)&&u.checkContentSize(),u.noticeCursor()},this.cancelScroll=function(){return u.timer&&c(u.timer),u.timer=0,u.bzscroll=!1,u.scrollrunning=!1,u}):(this.doScrollLeft=function(e,t){var n=u.getScrollTop();u.doScrollPos(e,n,t)},this.doScrollTop=function(e,t){var n=u.getScrollLeft();u.doScrollPos(n,e,t)},this.doScrollPos=function(e,t,n){var r=e>u.page.maxw?u.page.maxw:e;r<0&&(r=0);var i=t>u.page.maxh?u.page.maxh:t;i<0&&(i=0),u.synched("scroll",function(){u.setScrollTop(i),u.setScrollLeft(r)})},this.cancelScroll=function(){}),this.doScrollBy=function(e,t){var n=0;if(t)n=Math.floor((u.scroll.y-e)*u.scrollratio.y);else{var r=u.timer?u.newscrolly:u.getScrollTop(!0);n=r-e}if(u.bouncescroll){var i=Math.round(u.view.h/2);n<-i?n=-i:n>u.page.maxh+i&&(n=u.page.maxh+i)}u.cursorfreezed=!1,py=u.getScrollTop(!0);if(n<0&&py<=0)return u.noticeCursor();if(n>u.page.maxh&&py>=u.page.maxh)return u.checkContentSize(),u.noticeCursor();u.doScrollTop(n)},this.doScrollLeftBy=function(e,t){var n=0;if(t)n=Math.floor((u.scroll.x-e)*u.scrollratio.x);else{var r=u.timer?u.newscrollx:u.getScrollLeft(!0);n=r-e}if(u.bouncescroll){var i=Math.round(u.view.w/2);n<-i?n=-i:n>u.page.maxw+i&&(n=u.page.maxw+i)}u.cursorfreezed=!1,px=u.getScrollLeft(!0);if(n<0&&px<=0)return u.noticeCursor();if(n>u.page.maxw&&px>=u.page.maxw)return u.noticeCursor();u.doScrollLeft(n)},this.doScrollTo=function(e,t){var n=t?Math.round(e*u.scrollratio.y):e;n<0?n=0:n>u.page.maxh&&(n=u.page.maxh),u.cursorfreezed=!1,u.doScrollTop(e)},this.checkContentSize=function(){var e=u.getContentSize();(e.h!=u.page.h||e.w!=u.page.w)&&u.resize(!1,e)},u.onscroll=function(e){if(u.rail.drag)return;u.cursorfreezed||u.synched("scroll",function(){u.scroll.y=Math.round(u.getScrollTop()*(1/u.scrollratio.y)),u.railh&&(u.scroll.x=Math.round(u.getScrollLeft()*(1/u.scrollratio.x))),u.noticeCursor()})},u.bind(u.docscroll,"scroll",u.onscroll),this.doZoomIn=function(e){if(u.zoomactive)return;u.zoomactive=!0,u.zoomrestore={style:{}};var t=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],n=u.win[0].style;for(var r in t){var i=t[r];u.zoomrestore.style[i]=typeof n[i]!="undefined"?n[i]:""}u.zoomrestore.style.width=u.win.css("width"),u.zoomrestore.style.height=u.win.css("height"),u.zoomrestore.padding={w:u.win.outerWidth()-u.win.width(),h:u.win.outerHeight()-u.win.height()},h.isios4&&(u.zoomrestore.scrollTop=o(window).scrollTop(),o(window).scrollTop(0)),u.win.css({position:h.isios4?"absolute":"fixed",top:0,left:0,"z-index":u.opt.zindex+100,margin:"0px"});var s=u.win.css("backgroundColor");return(s==""||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(s))&&u.win.css("backgroundColor","#fff"),u.rail.css({"z-index":u.opt.zindex+110}),u.zoom.css({"z-index":u.opt.zindex+112}),u.zoom.css("backgroundPosition","0px -18px"),u.resizeZoom(),u.onzoomin&&u.onzoomin.call(u),u.cancelEvent(e)},this.doZoomOut=function(e){if(!u.zoomactive)return;return u.zoomactive=!1,u.win.css("margin",""),u.win.css(u.zoomrestore.style),h.isios4&&o(window).scrollTop(u.zoomrestore.scrollTop),u.rail.css({"z-index":u.ispage?u.opt.zindex:u.opt.zindex+2}),u.zoom.css({"z-index":u.opt.zindex}),u.zoomrestore=!1,u.zoom.css("backgroundPosition","0px 0px"),u.onResize(),u.onzoomout&&u.onzoomout.call(u),u.cancelEvent(e)},this.doZoom=function(e){return u.zoomactive?u.doZoomOut(e):u.doZoomIn(e)},this.resizeZoom=function(){if(!u.zoomactive)return;var e=u.getScrollTop();u.win.css({width:o(window).width()-u.zoomrestore.padding.w+"px",height:o(window).height()-u.zoomrestore.padding.h+"px"}),u.onResize(),u.setScrollTop(Math.min(u.page.maxh,e))},this.init(),o.nicescroll.push(this)},v=function(e){var t=this;this.nc=e,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+(new Date)},this.reset=function(e,n){t.stop();var r=t.time();t.steptime=0,t.lasttime=r,t.speedx=0,t.speedy=0,t.lastx=e,t.lasty=n,t.lastscrollx=-1,t.lastscrolly=-1},this.update=function(e,n){var r=t.time();t.steptime=r-t.lasttime,t.lasttime=r;var i=n-t.lasty,s=e-t.lastx,o=t.nc.getScrollTop(),u=t.nc.getScrollLeft(),a=o+i,f=u+s;t.snapx=f<0||f>t.nc.page.maxw,t.snapy=a<0||a>t.nc.page.maxh,t.speedx=s,t.speedy=i,t.lastx=e,t.lasty=n},this.stop=function(){t.nc.unsynched("domomentum2d"),t.timer&&clearTimeout(t.timer),t.timer=0,t.lastscrollx=-1,t.lastscrolly=-1},this.doSnapy=function(e,n){var r=!1;n<0?(n=0,r=!0):n>t.nc.page.maxh&&(n=t.nc.page.maxh,r=!0),e<0?(e=0,r=!0):e>t.nc.page.maxw&&(e=t.nc.page.maxw,r=!0),r&&t.nc.doScrollPos(e,n,t.nc.opt.snapbackspeed)},this.doMomentum=function(e){var n=t.time(),r=e?n+e:t.lasttime,i=t.nc.getScrollLeft(),s=t.nc.getScrollTop(),o=t.nc.page.maxh,u=t.nc.page.maxw;t.speedx=u>0?Math.min(60,t.speedx):0,t.speedy=o>0?Math.min(60,t.speedy):0;var a=r&&n-r<=50;if(s<0||s>o||i<0||i>u)a=!1;var f=t.speedy&&a?t.speedy:!1,l=t.speedx&&a?t.speedx:!1;if(f||l){var c=Math.max(16,t.steptime);if(c>50){var h=c/50;t.speedx*=h,t.speedy*=h,c=50}t.demulxy=0,t.lastscrollx=t.nc.getScrollLeft(),t.chkx=t.lastscrollx,t.lastscrolly=t.nc.getScrollTop(),t.chky=t.lastscrolly;var p=t.lastscrollx,d=t.lastscrolly,v=function(){var e=t.time()-n>600?.04:.02;if(t.speedx){p=Math.floor(t.lastscrollx-t.speedx*(1-t.demulxy)),t.lastscrollx=p;if(p<0||p>u)e=.1}if(t.speedy){d=Math.floor(t.lastscrolly-t.speedy*(1-t.demulxy)),t.lastscrolly=d;if(d<0||d>o)e=.1}t.demulxy=Math.min(1,t.demulxy+e),t.nc.synched("domomentum2d",function(){if(t.speedx){var e=t.nc.getScrollLeft();e!=t.chkx&&t.stop(),t.chkx=p,t.nc.setScrollLeft(p)}if(t.speedy){var n=t.nc.getScrollTop();n!=t.chky&&t.stop(),t.chky=d,t.nc.setScrollTop(d)}t.timer||(t.nc.hideCursor(),t.doSnapy(p,d))}),t.demulxy<1?t.timer=setTimeout(v,c):(t.stop(),t.nc.hideCursor(),t.doSnapy(p,d))};v()}else t.doSnapy(t.nc.getScrollLeft(),t.nc.getScrollTop())}},m=e.fn.scrollTop;o.cssHooks.pageYOffset={get:function(e,t,n){var r=o.data(e,"__nicescroll")||!1;return r&&r.ishwscroll?r.getScrollTop():m.call(e)},set:function(e,t){var n=o.data(e,"__nicescroll")||!1;return n&&n.ishwscroll?n.setScrollTop(parseInt(t)):m.call(e,t),this}},e.fn.scrollTop=function(e){if(typeof e=="undefined"){var t=this[0]?o.data(this[0],"__nicescroll")||!1:!1;return t&&t.ishwscroll?t.getScrollTop():m.call(this)}return this.each(function(){var t=o.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollTop(parseInt(e)):m.call(o(this),e)})};var g=e.fn.scrollLeft;o.cssHooks.pageXOffset={get:function(e,t,n){var r=o.data(e,"__nicescroll")||!1;return r&&r.ishwscroll?r.getScrollLeft():g.call(e)},set:function(e,t){var n=o.data(e,"__nicescroll")||!1;return n&&n.ishwscroll?n.setScrollLeft(parseInt(t)):g.call(e,t),this}},e.fn.scrollLeft=function(e){if(typeof e=="undefined"){var t=this[0]?o.data(this[0],"__nicescroll")||!1:!1;return t&&t.ishwscroll?t.getScrollLeft():g.call(this)}return this.each(function(){var t=o.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollLeft(parseInt(e)):g.call(o(this),e)})};var y=function(e){var t=this;this.length=0,this.name="nicescrollarray",this.each=function(e){for(var n=0;n<t.length;n++)e.call(t[n]);return t},this.push=function(e){t[t.length]=e,t.length++},this.eq=function(e){return t[e]};if(e)for(a=0;a<e.length;a++){var n=o.data(e[a],"__nicescroll")||!1;n&&(this[this.length]=n,this.length++)}return this};b(y.prototype,["show","hide","onResize","resize","remove","stop","doScrollPos"],function(e,t){e[t]=function(){var e=arguments;return this.each(function(){this[t].apply(this,e)})}}),e.fn.getNiceScroll=function(e){if(typeof e=="undefined")return new y(this);var t=o.data(this[e],"__nicescroll")||!1;return t},e.extend(e.expr[":"],{nicescroll:function(e){return o.data(e,"__nicescroll")?!0:!1}}),o.fn.niceScroll=function(e,t){typeof t=="undefined"&&typeof e=="object"&&!("jquery"in e)&&(t=e,e=!1);var n=new y;typeof t=="undefined"&&(t={});if(e||!1)t.doc=o(e),t.win=o(this);var r=!("doc"in t);return!r&&!("win"in t)&&(t.win=o(this)),this.each(function(){var e=o(this).data("__nicescroll")||!1;e||(t.doc=r?o(this):t.doc,e=new d(t,o(this)),o(this).data("__nicescroll",e)),n.push(e)}),n.length==1?n[0]:n},window.NiceScroll={getjQuery:function(){return e}},o.nicescroll||(o.nicescroll=new y)})(jQuery);